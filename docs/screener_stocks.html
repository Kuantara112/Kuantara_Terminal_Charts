<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Kuantara – Stocks Screener</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Fira Code (Kuantara Standard) -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&display=swap"/>

  <style>
    :root{
      /* Kuantara Terminal Palette */
      --bg-root:#000000;
      --bg-main:#111111;
      --border-soft:#2b2b2b;
      --text-main:#f5f5f5;
      --text-muted:#9b9b9b;
      --accent:#ffbf00;

      /* Font sizes (9–14px spec) */
      --fs-title:14px;
      --fs-subtitle:12px;
      --fs-body:11px;
      --fs-small:9.5px;

      --up:#22c55e;
      --down:#ef4444;
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:"Fira Code",monospace!important;
    }

    html,body{
      width:100%;
      height:100%;
      background-color:var(--bg-root);
      color:var(--text-main);
    }

    body{
      padding:16px;
      display:flex;
      flex-direction:column;
      min-height:100vh;
    }

    .panel-root{
      width:100%;
      max-width:100%;
      background:var(--bg-main);
      border:1px solid var(--border-soft);
      border-radius:4px;
      padding:12px 16px;
      display:flex;
      flex-direction:column;
      gap:8px;
      min-height:calc(100vh - 32px);
      flex:1 1 auto;
      margin:0 auto;
    }

    .panel-header{
      display:flex;
      align-items:center;
      justify-content:flex-start;
      gap:8px;
      flex-wrap:wrap;
      min-height:0;
    }

    .market-toggle{
      display:inline-flex;
      border:1px solid var(--border-soft);
      border-radius:4px;
      overflow:hidden;
      font-size:var(--fs-body);
      background:#000;
    }

    .market-toggle button{
      padding:4px 12px;
      background:#111111;
      border:none;
      color:var(--text-muted);
      cursor:pointer;
      font-size:var(--fs-body);
      white-space:nowrap;
    }

    .market-toggle button.active{
      background:var(--accent);
      color:#000000;
      font-weight:500;
    }

    .market-toggle button + button{
      border-left:1px solid var(--border-soft);
    }

    .panel-body{
      margin-top:2px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height:0;
      flex:1 1 auto;
    }

    .screen-grid{
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:12px;
      width:100%;
      flex:1 1 auto;
      height:100%;
    }

    .screen-card{
      background:#000000;
      border:1px solid var(--border-soft);
      border-radius:4px;
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:6px;
      min-height:0;
      height:100%;
    }

    .screen-card-header{
      display:flex;
      flex-direction:column;
      gap:2px;
      flex:0 0 auto;
    }

    .screen-card-title{
      font-size:var(--fs-subtitle);
      font-weight:500;
      color:var(--text-main);
    }

    .screen-card-tagline{
      font-size:var(--fs-small);
      color:var(--text-muted);
      opacity:0.85;
    }

    /* Wrapper: scroll horizontal kalau layar sempit, tinggi di-handle widget */
    .table-wrapper{
      margin-top:4px;
      flex:1 1 auto;
      border-radius:4px;
      border:1px solid var(--border-soft);
      overflow-x:auto;
      overflow-y:hidden;
      min-height:0;
    }

    .table-wrapper-inner{
      min-width:1000px;
      height:100%;
      display:block;
    }

    .tradingview-widget-container,
    .tradingview-widget-container__widget{
      height:100% !important;
    }

    /* Hide TradingView footer if muncul */
    .tradingview-widget-copyright{
      display:none !important;
      height:0 !important;
      overflow:hidden !important;
      opacity:0 !important;
      visibility:hidden !important;
    }

    /* Scrollbar horizontal */
    .table-wrapper::-webkit-scrollbar{
      width:6px;
      height:6px;
    }
    .table-wrapper::-webkit-scrollbar-track{
      background:#000000;
    }
    .table-wrapper::-webkit-scrollbar-thumb{
      background:#333333;
      border-radius:999px;
    }

    .hidden{
      display:none;
    }

    /* ===== Tablet ===== */
    @media (max-width: 960px){
      body{
        padding:12px;
      }
      .panel-root{
        min-height:auto;
      }
      .screen-grid{
        grid-template-columns:1fr;
        max-width:100%;
        margin:0 auto;
        height:auto;
      }
      .screen-card{
        height:auto;
      }
      .table-wrapper{
        min-height:380px;
      }
      .table-wrapper-inner{
        min-width:900px;
      }
    }

    /* ===== Mobile ===== */
    @media (max-width: 600px){
      .panel-root{
        padding:10px;
      }
      .panel-header{
        flex-direction:row;
        justify-content:center;
      }
      .table-wrapper{
        min-height:420px;
      }
      .table-wrapper-inner{
        min-width:800px;
      }
    }
  </style>
</head>
<body>
  <div class="panel-root" id="screener-panel">
    <!-- HEADER: HANYA TOGGLE USA / IDX -->
    <div class="panel-header">
      <div class="market-toggle" id="market-toggle">
        <button type="button" data-target="usa" class="active">USA</button>
        <button type="button" data-target="idx">IDX</button>
      </div>
    </div>

    <!-- BODY -->
    <div class="panel-body">
      <!-- GRID USA -->
      <div class="screen-grid" id="grid-usa">
        <!-- COL 1: TREND FOLLOWING (USA) -->
        <section class="screen-card">
          <div class="screen-card-header">
            <div class="screen-card-title">Trend Following – USA</div>
            <div class="screen-card-tagline">
              Saham US dengan tren naik kuat &amp; momentum berkelanjutan.
            </div>
          </div>

          <div class="table-wrapper">
            <div class="table-wrapper-inner">
              <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
                {
                  "market": "america",
                  "showToolbar": false,
                  "defaultColumn": "moving_averages",
                  "defaultScreen": "outperforming_SMA50",
                  "isTransparent": true,
                  "locale": "en",
                  "colorTheme": "dark",
                  "width": "100%",
                  "height": "100%"
                }
                </script>
              </div>
            </div>
          </div>
        </section>

        <!-- COL 2: VOLUME BREAKOUT (USA) -->
        <section class="screen-card">
          <div class="screen-card-header">
            <div class="screen-card-title">Volume Breakout – USA</div>
            <div class="screen-card-tagline">
              Lonjakan volume &amp; pergerakan abnormal untuk saham US.
            </div>
          </div>

          <div class="table-wrapper">
            <div class="table-wrapper-inner">
              <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
                {
                  "market": "america",
                  "showToolbar": false,
                  "defaultColumn": "performance",
                  "defaultScreen": "unusual_volume",
                  "isTransparent": true,
                  "locale": "en",
                  "colorTheme": "dark",
                  "width": "100%",
                  "height": "100%"
                }
                </script>
              </div>
            </div>
          </div>
        </section>

        <!-- COL 3: FUNDAMENTAL (USA) -->
        <section class="screen-card">
          <div class="screen-card-header">
            <div class="screen-card-title">Fundamental – USA</div>
            <div class="screen-card-tagline">
              Valuasi &amp; kualitas earnings saham US.
            </div>
          </div>

          <div class="table-wrapper">
            <div class="table-wrapper-inner">
              <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
                {
                  "market": "america",
                  "showToolbar": false,
                  "defaultColumn": "valuation",
                  "defaultScreen": "most_capitalized",
                  "isTransparent": true,
                  "locale": "en",
                  "colorTheme": "dark",
                  "width": "100%",
                  "height": "100%"
                }
                </script>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- GRID IDX -->
      <div class="screen-grid hidden" id="grid-idx">
        <!-- COL 1: TREND FOLLOWING (IDX) -->
        <section class="screen-card">
          <div class="screen-card-header">
            <div class="screen-card-title">Trend Following – IDX</div>
            <div class="screen-card-tagline">
              Saham Indonesia dengan tren naik kuat &amp; momentum berkelanjutan.
            </div>
          </div>

          <div class="table-wrapper">
            <div class="table-wrapper-inner">
              <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
                {
                  "market": "indonesia",
                  "showToolbar": false,
                  "defaultColumn": "moving_averages",
                  "defaultScreen": "outperforming_SMA50",
                  "isTransparent": true,
                  "locale": "en",
                  "colorTheme": "dark",
                  "width": "100%",
                  "height": "100%"
                }
                </script>
              </div>
            </div>
          </div>
        </section>

        <!-- COL 2: VOLUME BREAKOUT (IDX) -->
        <section class="screen-card">
          <div class="screen-card-header">
            <div class="screen-card-title">Volume Breakout – IDX</div>
            <div class="screen-card-tagline">
              Lonjakan volume &amp; pergerakan abnormal saham Indonesia.
            </div>
          </div>

          <div class="table-wrapper">
            <div class="table-wrapper-inner">
              <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
                {
                  "market": "indonesia",
                  "showToolbar": false,
                  "defaultColumn": "performance",
                  "defaultScreen": "unusual_volume",
                  "isTransparent": true,
                  "locale": "en",
                  "colorTheme": "dark",
                  "width": "100%",
                  "height": "100%"
                }
                </script>
              </div>
            </div>
          </div>
        </section>

        <!-- COL 3: FUNDAMENTAL (IDX) -->
        <section class="screen-card">
          <div class="screen-card-header">
            <div class="screen-card-title">Fundamental – IDX</div>
            <div class="screen-card-tagline">
              Valuasi &amp; kualitas earnings saham Indonesia.
            </div>
          </div>

          <div class="table-wrapper">
            <div class="table-wrapper-inner">
              <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
                {
                  "market": "indonesia",
                  "showToolbar": false,
                  "defaultColumn": "valuation",
                  "defaultScreen": "most_capitalized",
                  "isTransparent": true,
                  "locale": "en",
                  "colorTheme": "dark",
                  "width": "100%",
                  "height": "100%"
                }
                </script>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const toggle = document.getElementById('market-toggle');
      const usaGrid = document.getElementById('grid-usa');
      const idxGrid = document.getElementById('grid-idx');

      toggle.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          toggle.querySelectorAll('button').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');

          const target = btn.getAttribute('data-target');
          if(target === 'usa'){
            usaGrid.classList.remove('hidden');
            idxGrid.classList.add('hidden');
          }else{
            idxGrid.classList.remove('hidden');
            usaGrid.classList.add('hidden');
          }
        });
      });
    })();
  </script>
</body>
</html>

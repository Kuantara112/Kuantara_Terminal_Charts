<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover">

  <!-- Fira Code -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&display=swap">

  <!-- Markdown ringan -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- cloudscraper CDN (catatan: lib Node, di browser tidak dipakai langsung) -->
  <script src="https://cdn.jsdelivr.net/npm/cloudscraper@4.6.0/index.min.js"></script>

  <style>
    :root{
      --bg-root:#000000;
      --bg-main:#111111;
      --border-soft:#2b2b2b;
      --text-main:#f5f5f5;
      --text-muted:#9b9b9b;
      --accent:#ffbf00;
      --accent-alt:#00aaff;
      --chip-bg:#111111;

      --fs-title:14px;
      --fs-subtitle:12px;
      --fs-body:11px;
      --fs-small:10px;
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:"Fira Code",monospace;
      -webkit-tap-highlight-color:transparent;
    }

    html,body{
      height:100%;
    }

    body{
      background:var(--bg-root);
      color:var(--text-main);
      font-size:var(--fs-body);
      line-height:1.5;
      overflow:hidden;
      min-height:100vh;
    }

    /* SCROLLBAR HITAM KOMPAK */
    ::-webkit-scrollbar{width:6px}
    ::-webkit-scrollbar-track{background:#000000}
    ::-webkit-scrollbar-thumb{background:#222222;border-radius:3px}
    ::-webkit-scrollbar-thumb:hover{background:#333333}

    .app{
      width:100%;
      height:100%;
      padding:16px;
      display:flex;
      flex-direction:column;
    }

    @media (max-width:820px){
      .app{
        padding:12px;
      }
    }

    .title{
      font-size:var(--fs-title);
      font-weight:600;
      letter-spacing:.04em;
      text-transform:uppercase;
      color:var(--text-main);
      margin-bottom:10px;
    }

    .card{
      background:var(--bg-main);
      border:1px solid var(--border-soft);
      border-radius:4px;
      display:flex;
      flex-direction:column;
      flex:1;
      min-height:0;
      padding:0;
    }

    .chat{
      padding:16px;
      overflow:auto;
      flex:1;
      min-height:0;
      scroll-behavior:smooth;
      -webkit-overflow-scrolling:touch;
    }

    .row{
      display:grid;
      grid-template-columns:22px 1fr;
      gap:8px;
      margin-bottom:10px;
    }

    .sender{
      font-size:var(--fs-small);
      font-weight:500;
      margin-bottom:2px;
    }

    .sender.bot{color:var(--accent)}
    .sender.user{color:var(--accent-alt)}

    .bubble{
      font-size:var(--fs-body);
      color:var(--text-main);
    }

    .md pre{
      background:#000000;
      padding:8px;
      border-radius:4px;
      overflow:auto;
      font-size:var(--fs-small);
      border:1px solid var(--border-soft);
    }

    .md code{
      background:#000000;
      padding:2px 4px;
      border-radius:3px;
      font-size:var(--fs-small);
    }

    .md blockquote{
      border-left:2px solid #4a627a;
      margin:6px 0;
      padding-left:8px;
      color:#cfd3d7;
      font-size:var(--fs-body);
    }

    .md table{
      border-collapse:collapse;
      font-size:var(--fs-small);
    }

    .md th,.md td{
      border:1px solid #444;
      padding:4px 6px;
    }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      padding:8px 12px;
      border-top:1px dashed var(--border-soft);
      background:#0c0c0c;
    }

    .chip{
      background:var(--chip-bg);
      color:var(--text-muted);
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--border-soft);
      cursor:pointer;
      font-size:var(--fs-small);
      user-select:none;
    }

    .chip:hover{
      border-color:var(--accent);
      color:var(--accent);
    }

    .footer{
      border-top:1px solid var(--border-soft);
      padding:8px 10px;
      display:flex;
      gap:8px;
      align-items:center;
      background:#0a0a0a;
    }

    .footer-tools{
      display:flex;
      align-items:center;
      gap:4px;
      flex-shrink:0;
    }

    .icon-btn{
      width:26px;
      height:26px;
      min-width:26px;
      min-height:26px;
      border-radius:50%;
      border:1px solid #333333;
      background:#000000;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0;
      cursor:pointer;
    }

    .icon-btn svg{
      width:14px;
      height:14px;
    }

    .icon-btn:hover{
      border-color:var(--accent);
    }

    textarea{
      flex:1;
      resize:none;
      max-height:140px;
      min-height:34px;
      background:#000000;
      color:var(--text-main);
      border:1px solid #333333;
      border-radius:4px;
      padding:6px 8px;
      outline:none;
      font-size:var(--fs-body);
    }

    textarea::placeholder{
      color:var(--text-muted);
      font-size:var(--fs-small);
    }

    #send{
      width:30px;
      height:30px;
      min-width:30px;
      min-height:30px;
      border-radius:50%;
      border:none;
      background:var(--accent);
      color:#000000;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0;
      cursor:pointer;
      flex-shrink:0;
    }

    #send svg{
      width:14px;
      height:14px;
    }

    #send:hover{filter:brightness(1.06)}

    .muted{
      color:var(--text-muted);
      font-size:var(--fs-small);
      margin-top:8px;
    }

    .row svg{
      margin-top:1px;
      flex:0 0 auto;
    }

    /* COPY BUTTON UNTUK JAWABAN AI */
    .copy-btn{
      margin-top:6px;
      font-size:var(--fs-small);
      padding:3px 6px;
      background:transparent;
      border:1px solid var(--border-soft);
      color:var(--text-muted);
      border-radius:3px;
      cursor:pointer;
      float:right;
    }
    .copy-btn:hover{
      border-color:var(--accent);
      color:var(--accent);
    }

    @media (max-width:600px){
      .footer{
        padding:8px;
        gap:6px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <div class="card" id="card">
    <div id="chat" class="chat"></div>

    <div class="chips" id="chips">
      <span
        class="chip"
        data-prompt='Ringkas berita, data, informasi, dan sentimen pasar global terbaru (informasi seputar financial market paling lambat kurang dari 5 hari) meliputi semua jenis aset: forex, komoditas, saham, kripto, dan indeks dalam minimal 5-10 poin bullet, fokus pada nada dovish/hawkish bank sentral, statement pemimpin dunia, keadaan geopolitik, suku bunga, inflasi, informasi earnings, pergerakan besar di FX, saham, komoditas, dan kripto. Tutup dengan 1 paragraf singkat tentang implikasi utama untuk trader ritel hari ini.'
      >
        Ringkas Berita
      </span>

      <span
        class="chip"
        data-prompt='Bertindak sebagai macro strategist dan trader multi-aset. Berikan penjelasan kondisi global makro terbaru (headlines berita terkini, speech member bank sentral, infromasi suku bunga dan probabilitas hikes/cuts/hold, kondisi inflasi, data ekonomi utama, sentimen risk-on/risk-off, kekuatan dolar AS, atau faktor geopolitik terbaru, pilih mana yang informasinya terbaru saja) dalam satu paragraf, lalu buat ide trade hari ini untuk 4 kelompok aset: (1) Forex ‚Äì 3‚Äì5 pasangan mayor/cross, (2) Komoditas utama ‚Äì seperti emas, perak, minyak, dan lain-lain, (3) Indeks saham global utama, dan (4) Kripto besar. Untuk setiap aset, berikan: nama/ticker aset, bias arah dengan salah satu label: STRONG BUY, BUY, NEUTRAL, SELL, atau STRONG SELL (ditentukan dari seberapa Anda yakin terhadap setup-nya), serta 1‚Äì2 kalimat alasan singkat yang jelas berbasis narasi makro (bukan teknikal). Aturan: data dan informasi yang diambil harus terbaru tidak lebih dari 5 hari, jangan tampilkan harga aset, level teknikal, atau timeframe spesifik; fokus hanya pada bias dan alasan makro. Tulis dalam format list yang rapi per kelompok aset.'
      >
        Ide Trade Hari Ini
      </span>
    </div>

    <div class="footer">
      <div class="footer-tools">
        <button class="icon-btn" id="file-btn" title="Kirim file">
          <!-- Paperclip minimalis -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
            <path d="M8 13.5L14 7.5C15.1 6.4 16.9 6.4 18 7.5C19.1 8.6 19.1 10.4 18 11.5L11 18.5C9.3 20.2 6.5 20.2 4.8 18.5C3.1 16.8 3.1 14 4.8 12.3L11.5 5.5" stroke="#ffbf00" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <input type="file" id="file-input" multiple accept="image/*,.pdf,.doc,.docx" style="display:none">
      </div>
      <textarea id="input" placeholder="Tulis pesan‚Ä¶"></textarea>
      <button id="send" aria-label="Kirim">
        <!-- Paper plane minimalis -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
          <path d="M4.5 5.5L19.5 12L4.5 18.5L7 12L4.5 5.5Z" stroke="#000000" stroke-width="1.4" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>
</div>

<script>
/** =========================
 *  KONFIG & STATE
 *  ========================= */
const API_BASE = "https://sider.ai/api/chat/v1";
const TIMEZONE = "Asia/Makassar";
const TOKEN = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyMTgzNzM0NiwicmVnaXN0ZXJfdHlwZSI6Im9hdXRoMiIsImFwcF9uYW1lIjoiQ2hpdENoYXRfQ2hyb21lX0V4dCIsInRva2VuX2lkIjoiZTZlOGIwZGUtN2Q3Zi00NTZkLTkxNGQtNzUwNDQ0ZjkyZTNjIiwiaXNzIjoic2lkZXIuYWkiLCJhdWQiOlsiIl0sImV4cCI6MTc4ODY5NjUxMCwibmJmIjoxNzU3NTkyNTEwLCJpYXQiOjE3NTc1OTI1MTB9.mcq86TwFwPtql3S77_vhnJRGj08878Ej5WGkvY3OxWI";

/** üîê INSTRUKSI IDENTITAS KUANTARA AI */
const SYSTEM_INSTRUCTION = `Nama kamu adalah "Kuantara AI".
Kamu adalah asisten riset dan partner trading pribadi pengguna.
Jika pengguna menanyakan identitasmu, siapa kamu, kamu AI jenis apa, atau kamu pakai model apa, jawablah singkat dengan kalimat: "Aku Kuantara AI."
Jangan pernah menyebut GPT, LLM, model bahasa besar, OpenAI, atau menjelaskan arsitektur teknis di balikmu.
Tetap jawab seolah kamu satu entitas tunggal bernama Kuantara AI.`;

let cid = null;
let parentMessageId = null;
let isStreaming = false;
let typingIndex = null;
let streamBuffer = "";
let thinkingTimer = null;
const thinkingFrames = ["sedang berpikir", "sedang berpikir.", "sedang berpikir..", "sedang berpikir..."];
let thinkingIdx = 0;

const chatEl = document.getElementById("chat");
const inputEl = document.getElementById("input");
const sendBtn = document.getElementById("send");
const fileBtn = document.getElementById("file-btn");
const fileInput = document.getElementById("file-input");

/** =========================
 *  UTIL UI
 *  ========================= */
function svgUser(){return `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18">
  <circle cx="9" cy="6" r="3.2" fill="none" stroke="#00aaff" stroke-width="1.1"/>
  <path d="M4 14.2C4.9 12.6 6.8 11.5 9 11.5C11.2 11.5 13.1 12.6 14 14.2" fill="none" stroke="#00aaff" stroke-width="1.1" stroke-linecap="round"/>
</svg>`;}
function svgBot(){return `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18">
  <rect x="3.5" y="5" width="11" height="8" rx="2" ry="2" fill="none" stroke="#ffbf00" stroke-width="1.1"/>
  <circle cx="7" cy="9" r="0.9" fill="#ffbf00"/>
  <circle cx="11" cy="9" r="0.9" fill="#ffbf00"/>
  <path d="M9 3.5V5" stroke="#ffbf00" stroke-width="1.1" stroke-linecap="round"/>
</svg>`;}

const messages = []; // {sender:'Anda'|'Kuantara', contentMD:'...'}

function addMessage(sender, contentMD){
  messages.push({sender, contentMD});
  renderChat();
}

function setMessageAt(idx, contentMD){
  if (idx == null || idx < 0 || idx >= messages.length) return;
  messages[idx].contentMD = contentMD;
  renderChat();
}

function mdToHtml(md){
  if (window.marked) return marked.parse(md);
  return md
    .replace(/&/g,"&amp;")
    .replace(/</g,"&lt;")
    .replace(/>/g,"&gt;")
    .replace(/\n/g,"<br>");
}

function renderChat(){
  const html = messages.map((m, idx)=>{
    const icon = m.sender === "Anda" ? svgUser() : svgBot();
    const senderClass = m.sender === "Anda" ? "user" : "bot";
    const copyBtn = m.sender === "Anda" ? "" : `<button class="copy-btn" data-idx="${idx}">Copy</button>`;
    return `
      <div class="row">
        <div>${icon}</div>
        <div>
          <div class="sender ${senderClass}">${m.sender}</div>
          <div class="bubble md">${mdToHtml(m.contentMD || "")}</div>
          ${copyBtn}
        </div>
      </div>
    `;
  }).join("");
  chatEl.innerHTML = html;
  chatEl.scrollTop = chatEl.scrollHeight;
}

function startThinking(){
  stopThinking();
  if (typingIndex == null) return;
  setMessageAt(typingIndex, thinkingFrames[0]);
  thinkingIdx = 0;
  thinkingTimer = setInterval(()=>{
    thinkingIdx = (thinkingIdx+1) % thinkingFrames.length;
    setMessageAt(typingIndex, thinkingFrames[thinkingIdx]);
  }, 450);
}

function stopThinking(){
  if (thinkingTimer){
    clearInterval(thinkingTimer);
    thinkingTimer = null;
  }
}

/** =========================
 *  HEADER
 *  ========================= */
function baseHeaders_chat(){
  return {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit(537.36) Chrome/140.0.0.0 Safari/537.36",
    "Content-Type": "application/json",
    "sec-ch-ua-platform": "\"Windows\"",
    "Accept": "text/event-stream",
    "Cache-Control": "no-cache",
    "Connection": "keep-alive",
    "sec-ch-ua": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"Google Chrome\";v=\"140\"",
    "authorization": `Bearer ${TOKEN}`,
    "x-app-name": "ChitChat_Web",
    "x-time-zone": TIMEZONE,
    "sec-ch-ua-mobile": "?0",
    "x-app-version": "1.0.0",
    "origin": "https://sider.ai",
    "sec-fetch-site": "same-origin",
    "sec-fetch-dest": "empty",
    "referer": "https://sider.ai/chat",
    "accept-language": "en-US,en;q=0.9,id;q=0.8"
  };
}

function baseHeaders_list(){
  return {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit(537.36) Chrome/141.0.0.0 Safari/537.36",
    "Accept-Encoding": "gzip, deflate, br, zstd",
    "Content-Type": "application/json",
    "sec-ch-ua-platform": "\"Windows\"",
    "authorization": `Bearer ${TOKEN}`,
    "x-app-name": "ChitChat_Web",
    "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
    "x-time-zone": TIMEZONE,
    "sec-ch-ua-mobile": "?0",
    "x-trace-id": "8782f913-c597-4d7a-9852-af8cf9d1365c",
    "x-app-version": "1.0.0",
    "origin": "https://sider.ai",
    "sec-fetch-site": "same-origin",
    "sec-fetch-dest": "empty",
    "referer": "https://sider.ai/chat",
    "accept-language": "en-US,en;q=0.9,id;q=0.8",
    "priority": "u=1, i",
    "Cookie": "lang=en"
  };
}

/** =========================
 *  /conversation/list untuk ambil leaf
 *  ========================= */
async function fetchCurrentLeaf(conversationId, limit=100, timeoutMs=15000){
  const ctrl = new AbortController();
  const t = setTimeout(()=>ctrl.abort(), timeoutMs);
  try{
    const resp = await fetch(`${API_BASE}/conversation/list`, {
      method:"POST",
      headers: baseHeaders_list(),
      body: JSON.stringify({ limit, client_type:"chat", sort_type:"desc" }),
      signal: ctrl.signal,
      mode: "cors",
      credentials: "omit",
    });
    if (!resp.ok) return null;
    const data = await resp.json().catch(()=>null);
    const convs = data?.data?.conversations || [];
    for(const c of convs){
      if (c?.id === conversationId) return c.current_leaf_message_id || null;
    }
    return null;
  }catch{
    return null;
  }finally{
    clearTimeout(t);
  }
}

/** =========================
 *  STREAM COMPLETIONS (SSE via fetch)
 *  ========================= */
async function startStreaming(promptText){
  if (isStreaming) return;

  if (cid){
    const leaf = await fetchCurrentLeaf(cid);
    if (leaf) parentMessageId = leaf;
  }

  addMessage("Anda", promptText);
  addMessage("Kuantara AI", "");
  typingIndex = messages.length-1;
  startThinking();
  isStreaming = true;
  streamBuffer = "";

  // üîß Gabungkan system instruction + input user
  const finalPrompt = `${SYSTEM_INSTRUCTION}\n\nUser: ${promptText}`;

  const payload = {
    model: "gpt-5.1",
    from: "chat",
    client_prompt: {},
    multi_content: [
      { type:"text", text: finalPrompt, user_input_text: promptText }
    ],
    prompt_templates: [],
    tools: { auto: ["search"] },
    stream: true,
    output_language: "id",
    customize_instructions: { enable: true },
  };
  if (cid) payload.cid = cid;
  if (parentMessageId) payload.parent_message_id = parentMessageId;

  let resp;
  try{
    resp = await fetch(`${API_BASE}/completions`, {
      method:"POST",
      headers: baseHeaders_chat(),
      body: JSON.stringify(payload),
      mode: "cors",
      credentials: "omit"
    });
  }catch(err){
    stopThinking();
    setMessageAt(typingIndex, `**Error koneksi:** ${err?.message || err}`);
    resetStreamFlags();
    return;
  }

  if (!resp.ok || !resp.body){
    stopThinking();
    const text = await safeText(resp);
    setMessageAt(
      typingIndex,
      `**HTTP ${resp.status} ${resp.statusText}** ${text ? " ‚Äî "+text.slice(0,300) : ""}`
    );
    resetStreamFlags();
    return;
  }

  const reader = resp.body.getReader();
  const decoder = new TextDecoder();
  let buffer = "";

  try{
    while(true){
      const {value, done} = await reader.read();
      if (done) break;
      buffer += decoder.decode(value, {stream:true});

      let idx;
      while((idx = buffer.indexOf("\n")) >= 0){
        const rawLine = buffer.slice(0, idx);
        buffer = buffer.slice(idx+1);

        const line = (rawLine || "").trim();
        if (!line) continue;

        if (line === "[DONE]") continue;
        if (line.startsWith("data:")){
          const dataLine = line.slice(5).trim();
          if (dataLine === "[DONE]") continue;
          handleSSEData(dataLine);
        }else{
          handleSSEData(line);
        }
      }

      if (streamBuffer && typingIndex != null){
        stopThinking();
        setMessageAt(typingIndex, streamBuffer);
      }
    }
  }catch(err){
    stopThinking();
    setMessageAt(typingIndex, `**Stream error:** ${err?.message || err}`);
  }finally{
    if (streamBuffer && typingIndex != null){
      stopThinking();
      setMessageAt(typingIndex, streamBuffer);
    }else if (typingIndex != null && !messages[typingIndex].contentMD){
      stopThinking();
      setMessageAt(typingIndex, "_Tidak ada respons._");
    }
    resetStreamFlags();
  }
}

function handleSSEData(dataStr){
  try{
    const obj = JSON.parse(dataStr);
    const payload = obj?.data || {};
    const type = payload?.type;

    if (type === "credit_info"){
      return;
    }
    if (type === "message_start"){
      const ms = payload?.message_start || {};
      if (ms?.cid) cid = ms.cid;
      if (ms?.assistant_message_id) parentMessageId = ms.assistant_message_id;
      return;
    }
    if (type === "text"){
      const piece = payload?.text;
      if (typeof piece === "string" && piece){ streamBuffer += piece; }
      return;
    }
    for (const k of ["text","token","content","output","message"]){
      const v = payload?.[k];
      if (typeof v === "string" && v){
        streamBuffer += v;
        return;
      }
    }
  }catch{
    if (dataStr && dataStr !== "[DONE]") streamBuffer += dataStr;
  }
}

async function safeText(resp){
  try{ return await resp.text(); }catch{ return ""; }
}

function resetStreamFlags(){
  isStreaming = false;
  typingIndex = null;
  streamBuffer = "";
}

/** =========================
 *  EVENT HANDLERS
 *  ========================= */
sendBtn.addEventListener("click", ()=>{
  const txt = inputEl.value.trim();
  if (!txt || isStreaming) return;
  inputEl.value = "";
  autoResize();
  startStreaming(txt);
});

inputEl.addEventListener("keydown", (e)=>{
  if ((e.key === "Enter" || e.keyCode === 13) && !e.shiftKey){
    e.preventDefault();
    sendBtn.click();
  }
});

inputEl.addEventListener("input", autoResize);

function autoResize(){
  inputEl.style.height = "auto";
  const h = Math.min(140, Math.max(34, inputEl.scrollHeight+2));
  inputEl.style.height = h + "px";
}

document.querySelectorAll(".chip").forEach(ch=>{
  ch.addEventListener("click", ()=>{
    inputEl.value = ch.dataset.prompt || "";
    autoResize();
    inputEl.focus();
  });
});

/** =========================
 *  COPY HANDLER UNTUK JAWABAN AI
 *  ========================= */
chatEl.addEventListener("click", (e)=>{
  const btn = e.target.closest(".copy-btn");
  if (!btn) return;

  const idx = parseInt(btn.dataset.idx, 10);
  const row = btn.closest(".row");
  const bubble = row ? row.querySelector(".bubble") : null;
  const text = bubble ? bubble.innerText.trim() : "";

  if (!text) return;

  if (navigator.clipboard && navigator.clipboard.writeText){
    navigator.clipboard.writeText(text).then(()=>{
      const oldLabel = btn.textContent;
      btn.textContent = "Copied";
      setTimeout(()=>btn.textContent = oldLabel, 1200);
    }).catch(()=>{
      const oldLabel = btn.textContent;
      btn.textContent = "Error";
      setTimeout(()=>btn.textContent = oldLabel, 1200);
    });
  }else{
    const ta = document.createElement("textarea");
    ta.value = text;
    ta.style.position = "fixed";
    ta.style.opacity = "0";
    document.body.appendChild(ta);
    ta.focus();
    ta.select();
    try{
      document.execCommand("copy");
      const oldLabel = btn.textContent;
      btn.textContent = "Copied";
      setTimeout(()=>btn.textContent = oldLabel, 1200);
    }catch{
      const oldLabel = btn.textContent;
      btn.textContent = "Error";
      setTimeout(()=>btn.textContent = oldLabel, 1200);
    }
    document.body.removeChild(ta);
  }
});

/** =========================
 *  FILE UPLOAD (LOCAL UX SAJA)
 *  ========================= */
fileBtn.addEventListener("click", ()=>{
  fileInput.click();
});

fileInput.addEventListener("change", (e)=>{
  const files = Array.from(e.target.files || []);
  if (!files.length) return;

  const list = files.map(f=>`- ${f.name}`).join("\n");
  addMessage("Anda", `üìé Mengunggah file:\n${list}\n\n_(File hanya tersimpan di perangkat Anda. Integrasi upload ke AI belum diaktifkan di sisi backend.)_`);
  fileInput.value = "";
});

/** =========================
 *  WELCOME
 *  ========================= */
addMessage("Kuantara AI", "Halo! **Ada yang bisa saya bantu hari ini di market?**");
</script>
</body>
</html>

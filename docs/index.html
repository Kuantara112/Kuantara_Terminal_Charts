<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kuantara Terminal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fira Code -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&display=swap"
  />

  <style>
    :root {
      --amber: #ffbf00;
      --bg-root: #000000;
      --bg-main: #111111;
      --bg-panel: #181818;
      --border-soft: #2b2b2b;
      --text-main: #f5f5f5;
      --text-muted: #9b9b9b;
      --danger: #ff4b4b;
      --success: #1dd75b;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Fira Code", monospace;
      background-color: var(--bg-root);
      color: var(--text-main);
      height: 100vh;
      overflow: hidden;
    }

    .kt-root {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    /* TOP BAR (Bloomberg-like strip) */
    .kt-topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #070707;
      border-bottom: 1px solid var(--border-soft);
      padding: 6px 10px;
      font-size: 11px;
    }

    .kt-topbar-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .kt-logo {
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      font-size: 12px;
      color: var(--amber);
      white-space: nowrap;
    }

    .kt-topbar-tag {
      padding: 2px 6px;
      border: 1px solid var(--border-soft);
      background: #101010;
      font-size: 10px;
      color: var(--text-muted);
      white-space: nowrap;
    }

    .kt-topbar-right {
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--text-muted);
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .kt-topbar-status {
      font-size: 10px;
      white-space: nowrap;
    }

    .kt-topbar-pill {
      padding: 2px 6px;
      border-radius: 2px;
      background: #101010;
      border: 1px solid var(--border-soft);
      font-size: 10px;
      white-space: nowrap;
    }

    /* MAIN LAYOUT – MOBILE FIRST */
    .kt-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: var(--bg-main);
      min-height: 0;
    }

    /* SIDEBAR MENU – top block on mobile */
    .kt-sidebar {
      border-bottom: 1px solid var(--border-soft);
      background: #050505;
      display: flex;
      flex-direction: column;
      font-size: 12px;
      max-height: 230px;
      min-height: 140px;
    }

    .kt-sidebar-header {
      padding: 8px 10px;
      border-bottom: 1px solid var(--border-soft);
      color: var(--amber);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 10px;
    }

    .kt-menu-scroll {
      flex: 1;
      overflow-y: auto;
    }

    .kt-menu-block {
      border-bottom: 1px solid var(--border-soft);
    }

    .kt-menu-main {
      width: 100%;
      text-align: left;
      padding: 7px 10px;
      background: transparent;
      border: none;
      color: var(--text-main);
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }

    .kt-menu-main:hover {
      background: #141414;
    }

    .kt-menu-main.active {
      background: #1f1f1f;
      border-left: 2px solid var(--amber);
      padding-left: 8px;
    }

    .kt-menu-main-label {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .kt-menu-index {
      color: var(--amber);
      min-width: 14px;
    }

    .kt-menu-hint {
      color: var(--text-muted);
      font-size: 10px;
      white-space: nowrap;
    }

    .kt-submenu {
      padding: 4px 0 6px 24px;
      background: #050505;
      border-top: 1px solid #111111;
    }

    .kt-submenu-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 3px 10px 3px 0;
      cursor: pointer;
      color: var(--text-muted);
      font-size: 11px;
    }

    .kt-submenu-item:hover {
      color: var(--text-main);
    }

    .kt-submenu-item.active {
      color: var(--amber);
    }

    .kt-submenu-hint {
      font-size: 10px;
      color: var(--text-muted);
    }

    /* CONTENT AREA */
    .kt-content {
      display: flex;
      flex-direction: column;
      background: var(--bg-main);
      min-height: 0;
    }

    .kt-content-header {
      border-bottom: 1px solid var(--border-soft);
      padding: 6px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      gap: 8px;
      flex-wrap: wrap;
    }

    .kt-breadcrumb {
      display: flex;
      gap: 6px;
      align-items: baseline;
      min-width: 0;
    }

    .kt-breadcrumb-main {
      color: var(--amber);
      font-weight: 500;
      white-space: nowrap;
    }

    .kt-breadcrumb-sub {
      color: var(--text-muted);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      max-width: 160px;
    }

    .kt-header-right {
      display: flex;
      gap: 8px;
      color: var(--text-muted);
      flex-wrap: wrap;
      justify-content: flex-end;
      font-size: 10px;
    }

    .kt-content-body {
      flex: 1;
      padding: 8px 10px;
      background: var(--bg-main);
      overflow: auto;
    }

    /* Placeholder for future iframe content */
    .kt-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* STATUS BAR (keyboard hints) */
    .kt-statusbar {
      border-top: 1px solid var(--border-soft);
      padding: 4px 10px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #050505;
      color: var(--text-muted);
      gap: 8px;
      flex-wrap: wrap;
    }

    .kt-status-keys {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .kt-key {
      padding: 1px 6px;
      border-radius: 2px;
      border: 1px solid var(--border-soft);
      font-size: 10px;
      background: #101010;
      color: var(--text-muted);
      white-space: nowrap;
    }

    .kt-status-msg {
      font-size: 10px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 40%;
    }

    /* Simple scrollbar */
    .kt-menu-scroll::-webkit-scrollbar {
      width: 6px;
    }
    .kt-menu-scroll::-webkit-scrollbar-track {
      background: #050505;
    }
    .kt-menu-scroll::-webkit-scrollbar-thumb {
      background: #333333;
    }

    /* FLOATING AI BUTTON (FAB) */
    .kt-ai-fab {
      position: fixed;
      right: 16px;
      bottom: 16px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--amber);
      color: #000000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      font-weight: 700;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.6);
      cursor: pointer;
      z-index: 50;
      border: 1px solid #f0f0f0;
      user-select: none;
    }

    .kt-ai-fab:hover {
      filter: brightness(1.08);
    }

    /* FLOATING AI PANEL */
    .kt-ai-panel {
      position: fixed;
      right: 16px;
      bottom: 72px;
      width: min(360px, 92vw);
      max-height: 60vh;
      background: #111111;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.8);
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 49;
    }

    .kt-ai-panel-header {
      padding: 8px 10px;
      border-bottom: 1px solid var(--border-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 11px;
    }

    .kt-ai-panel-title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .kt-ai-panel-title span:first-child {
      color: var(--amber);
      font-weight: 500;
      font-size: 11px;
    }

    .kt-ai-panel-title span:last-child {
      color: var(--text-muted);
      font-size: 10px;
    }

    .kt-ai-panel-close {
      cursor: pointer;
      font-size: 12px;
      color: var(--text-muted);
      padding: 2px 6px;
      border-radius: 3px;
    }

    .kt-ai-panel-close:hover {
      background: #222222;
    }

    .kt-ai-panel-body {
      padding: 8px 10px;
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .kt-ai-hint {
      font-size: 10px;
    }

    .kt-ai-input {
      margin-top: 4px;
      padding: 6px 7px;
      background: #050505;
      border: 1px solid var(--border-soft);
      border-radius: 3px;
      color: var(--text-main);
      font-family: "Fira Code", monospace;
      font-size: 11px;
      width: 100%;
      resize: none;
      min-height: 60px;
    }

    .kt-ai-input::placeholder {
      color: #555555;
    }

    .kt-ai-footer {
      padding: 6px 10px 8px;
      border-top: 1px solid var(--border-soft);
      display: flex;
      justify-content: flex-end;
      gap: 6px;
    }

    .kt-ai-btn {
      padding: 4px 10px;
      border-radius: 3px;
      font-size: 11px;
      border: 1px solid var(--border-soft);
      background: #181818;
      color: var(--text-muted);
      cursor: pointer;
    }

    .kt-ai-btn.primary {
      background: var(--amber);
      color: #000;
      border-color: #f0f0f0;
    }

    .kt-ai-btn.primary:hover {
      filter: brightness(1.08);
    }

    .kt-ai-btn:disabled {
      opacity: 0.4;
      cursor: default;
    }

    /* DESKTOP LAYOUT OVERRIDES */
    @media (min-width: 900px) {
      .kt-main {
        display: grid;
        grid-template-columns: 260px minmax(0, 1fr);
        height: calc(100vh - 30px);
      }

      .kt-sidebar {
        border-right: 1px solid var(--border-soft);
        border-bottom: none;
        max-height: none;
      }

      .kt-content-body {
        padding: 10px 12px;
      }

      .kt-status-msg {
        max-width: 60%;
      }
    }
  </style>
</head>
<body>
  <div class="kt-root">
    <!-- TOP BAR -->
    <header class="kt-topbar">
      <div class="kt-topbar-left">
        <div class="kt-logo">KUANTARA TERMINAL</div>
        <div class="kt-topbar-tag">MARKET INTELLIGENCE · MACRO · QUANT</div>
      </div>
      <div class="kt-topbar-right">
        <div class="kt-topbar-status">PROFILE: GUEST</div>
        <div class="kt-topbar-pill">TAB · Profile</div>
        <div class="kt-topbar-pill">ESC · Main Menu</div>
      </div>
    </header>

    <!-- MAIN LAYOUT -->
    <div class="kt-main">
      <!-- SIDEBAR -->
      <aside class="kt-sidebar">
        <div class="kt-sidebar-header">MAIN MENU (Alt + 0–9)</div>

        <div class="kt-menu-scroll">
          <!-- 0. MARKETS -->
          <div class="kt-menu-block" data-menu="0">
            <button class="kt-menu-main active" data-menu="0">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">0</span>
                <span>Markets</span>
              </span>
              <span class="kt-menu-hint">Alt+0</span>
            </button>
            <div class="kt-submenu" data-menu-sub="0">
              <div class="kt-submenu-item active" data-menu="0" data-sub-index="0">
                <span>Overview</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="0" data-sub-index="1">
                <span>Forex</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="0" data-sub-index="2">
                <span>Commodities</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
              <div class="kt-submenu-item" data-menu="0" data-sub-index="3">
                <span>Bonds</span>
                <span class="kt-submenu-hint">Ctrl+3</span>
              </div>
              <div class="kt-submenu-item" data-menu="0" data-sub-index="4">
                <span>Stocks</span>
                <span class="kt-submenu-hint">Ctrl+4</span>
              </div>
              <div class="kt-submenu-item" data-menu="0" data-sub-index="5">
                <span>Crypto</span>
                <span class="kt-submenu-hint">Ctrl+5</span>
              </div>
              <div class="kt-submenu-item" data-menu="0" data-sub-index="6">
                <span>ETF</span>
                <span class="kt-submenu-hint">Ctrl+6</span>
              </div>
            </div>
          </div>

          <!-- 1. NEWS -->
          <div class="kt-menu-block" data-menu="1">
            <button class="kt-menu-main" data-menu="1">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">1</span>
                <span>News</span>
              </span>
              <span class="kt-menu-hint">Alt+1</span>
            </button>
            <div class="kt-submenu" data-menu-sub="1">
              <div class="kt-submenu-item" data-menu="1" data-sub-index="0">
                <span>Global</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="1" data-sub-index="1">
                <span>Indonesia</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
            </div>
          </div>

          <!-- 2. MACROECONOMIC -->
          <div class="kt-menu-block" data-menu="2">
            <button class="kt-menu-main" data-menu="2">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">2</span>
                <span>Macroeconomic</span>
              </span>
              <span class="kt-menu-hint">Alt+2</span>
            </button>
            <div class="kt-submenu" data-menu-sub="2">
              <div class="kt-submenu-item" data-menu="2" data-sub-index="0">
                <span>Core Macro</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="2" data-sub-index="1">
                <span>Central Bank</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="2" data-sub-index="2">
                <span>Details</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
            </div>
          </div>

          <!-- 3. GEO-ECONOMIC -->
          <div class="kt-menu-block" data-menu="3">
            <button class="kt-menu-main" data-menu="3">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">3</span>
                <span>Geo-Economic</span>
              </span>
              <span class="kt-menu-hint">Alt+3</span>
            </button>
            <div class="kt-submenu" data-menu-sub="3">
              <div class="kt-submenu-item" data-menu="3" data-sub-index="0">
                <span>Trade &amp; Shipping</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="3" data-sub-index="1">
                <span>Supply Chain</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="3" data-sub-index="2">
                <span>Demographics</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
              <div class="kt-submenu-item" data-menu="3" data-sub-index="3">
                <span>Sources</span>
                <span class="kt-submenu-hint">Ctrl+3</span>
              </div>
            </div>
          </div>

          <!-- 4. METRICS -->
          <div class="kt-menu-block" data-menu="4">
            <button class="kt-menu-main" data-menu="4">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">4</span>
                <span>Metrics</span>
              </span>
              <span class="kt-menu-hint">Alt+4</span>
            </button>
            <div class="kt-submenu" data-menu-sub="4">
              <div class="kt-submenu-item" data-menu="4" data-sub-index="0">
                <span>Macro</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="4" data-sub-index="1">
                <span>Sentiment</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="4" data-sub-index="2">
                <span>Seasonality</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
              <div class="kt-submenu-item" data-menu="4" data-sub-index="3">
                <span>Flows</span>
                <span class="kt-submenu-hint">Ctrl+3</span>
              </div>
              <div class="kt-submenu-item" data-menu="4" data-sub-index="4">
                <span>Regimes</span>
                <span class="kt-submenu-hint">Ctrl+4</span>
              </div>
            </div>
          </div>

          <!-- 5. COMPANIES -->
          <div class="kt-menu-block" data-menu="5">
            <button class="kt-menu-main" data-menu="5">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">5</span>
                <span>Companies</span>
              </span>
              <span class="kt-menu-hint">Alt+5</span>
            </button>
            <div class="kt-submenu" data-menu-sub="5">
              <div class="kt-submenu-item" data-menu="5" data-sub-index="0">
                <span>United States</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="5" data-sub-index="1">
                <span>Indonesia</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="5" data-sub-index="2">
                <span>Blockchain Projects</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
            </div>
          </div>

          <!-- 6. CHARTS -->
          <div class="kt-menu-block" data-menu="6">
            <button class="kt-menu-main" data-menu="6">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">6</span>
                <span>Charts</span>
              </span>
              <span class="kt-menu-hint">Alt+6</span>
            </button>
            <div class="kt-submenu" data-menu-sub="6">
              <div class="kt-submenu-item" data-menu="6" data-sub-index="0">
                <span>Technical</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="6" data-sub-index="1">
                <span>Fundamental</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="6" data-sub-index="2">
                <span>Metric</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
            </div>
          </div>

          <!-- 7. QUANTITATIVE -->
          <div class="kt-menu-block" data-menu="7">
            <button class="kt-menu-main" data-menu="7">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">7</span>
                <span>Quantitative</span>
              </span>
              <span class="kt-menu-hint">Alt+7</span>
            </button>
            <div class="kt-submenu" data-menu-sub="7">
              <div class="kt-submenu-item" data-menu="7" data-sub-index="0">
                <span>Regression</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="7" data-sub-index="1">
                <span>Random Walk</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="7" data-sub-index="2">
                <span>ARIMA</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
              <div class="kt-submenu-item" data-menu="7" data-sub-index="3">
                <span>LSTM</span>
                <span class="kt-submenu-hint">Ctrl+3</span>
              </div>
              <div class="kt-submenu-item" data-menu="7" data-sub-index="4">
                <span>Portfolio</span>
                <span class="kt-submenu-hint">Ctrl+4</span>
              </div>
              <div class="kt-submenu-item" data-menu="7" data-sub-index="5">
                <span>Correlation</span>
                <span class="kt-submenu-hint">Ctrl+5</span>
              </div>
            </div>
          </div>

          <!-- 8. RESEARCH -->
          <div class="kt-menu-block" data-menu="8">
            <button class="kt-menu-main" data-menu="8">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">8</span>
                <span>Research</span>
              </span>
              <span class="kt-menu-hint">Alt+8</span>
            </button>
            <div class="kt-submenu" data-menu-sub="8">
              <div class="kt-submenu-item" data-menu="8" data-sub-index="0">
                <span>Internal</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="8" data-sub-index="1">
                <span>Institutions</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="8" data-sub-index="2">
                <span>Articles</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
              <div class="kt-submenu-item" data-menu="8" data-sub-index="3">
                <span>Reports</span>
                <span class="kt-submenu-hint">Ctrl+3</span>
              </div>
            </div>
          </div>

          <!-- 9. TOOLS -->
          <div class="kt-menu-block" data-menu="9">
            <button class="kt-menu-main" data-menu="9">
              <span class="kt-menu-main-label">
                <span class="kt-menu-index">9</span>
                <span>Tools</span>
              </span>
              <span class="kt-menu-hint">Alt+9</span>
            </button>
            <div class="kt-submenu" data-menu-sub="9">
              <div class="kt-submenu-item" data-menu="9" data-sub-index="0">
                <span>Stocks Screener</span>
                <span class="kt-submenu-hint">Ctrl+0</span>
              </div>
              <div class="kt-submenu-item" data-menu="9" data-sub-index="1">
                <span>Journaling</span>
                <span class="kt-submenu-hint">Ctrl+1</span>
              </div>
              <div class="kt-submenu-item" data-menu="9" data-sub-index="2">
                <span>Deepnote Page</span>
                <span class="kt-submenu-hint">Ctrl+2</span>
              </div>
              <div class="kt-submenu-item" data-menu="9" data-sub-index="3">
                <span>Education</span>
                <span class="kt-submenu-hint">Ctrl+3</span>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- CONTENT AREA -->
      <section class="kt-content">
        <div class="kt-content-header">
          <div class="kt-breadcrumb">
            <span class="kt-breadcrumb-main" id="breadcrumb-main">0 · Markets</span>
            <span class="kt-breadcrumb-sub" id="breadcrumb-sub">Overview</span>
          </div>
          <div class="kt-header-right">
            <span>Shift · Keyboard Functions</span>
            <span>Ctrl + F · Search</span>
          </div>
        </div>

        <!-- BLANK WORKSPACE (future: iframe-based data per menu/sub-menu) -->
        <div class="kt-content-body" id="kt-content-body">
          <!--
          Contoh ke depan:
          <iframe src="https://your-data-source" class="kt-iframe" loading="lazy"></iframe>
          -->
        </div>

        <div class="kt-statusbar">
          <div class="kt-status-keys">
            <div class="kt-key">Alt + 0–9 · Main Menu</div>
            <div class="kt-key">Ctrl + 0–9 · Sub Menu</div>
            <div class="kt-key">Esc · Back to Markets (0)</div>
            <div class="kt-key">TAB · Profile</div>
          </div>
          <div class="kt-status-msg" id="kt-status-msg">
            READY
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- FLOATING AI FAB & PANEL -->
  <div class="kt-ai-fab" id="kt-ai-fab">AI</div>

  <div class="kt-ai-panel" id="kt-ai-panel">
    <div class="kt-ai-panel-header">
      <div class="kt-ai-panel-title">
        <span>Kuantara AI Assistant</span>
        <span>Data diambil dari iframe masing-masing modul.</span>
      </div>
      <div class="kt-ai-panel-close" id="kt-ai-close">✕</div>
    </div>
    <div class="kt-ai-panel-body">
      <div>Context-aware helper untuk menjelaskan data di layar.</div>
      <div class="kt-ai-hint">
        Nantinya AI bisa membaca data dari iframe (Markets, Macro, Geo-Economic, dll) lalu menjelaskan narasi, risk, dan trade idea.
      </div>
      <textarea
        class="kt-ai-input"
        placeholder="Tulis pertanyaan, misalnya: &#10;• Jelaskan kondisi likuiditas global dari panel Macro.&#10;• Apa implikasi yield curve saat ini ke risk assets?"
        disabled
      ></textarea>
      <div class="kt-ai-hint">
        (Prototype UI · koneksi ke engine AI & iframe data akan ditambahkan di backend)
      </div>
    </div>
    <div class="kt-ai-footer">
      <button class="kt-ai-btn" disabled>History</button>
      <button class="kt-ai-btn primary" disabled>Ask AI</button>
    </div>
  </div>

  <script>
    (function () {
      const mainButtons = document.querySelectorAll(".kt-menu-main");
      const subItems = document.querySelectorAll(".kt-submenu-item");
      const breadcrumbMain = document.getElementById("breadcrumb-main");
      const breadcrumbSub = document.getElementById("breadcrumb-sub");
      const statusMsg = document.getElementById("kt-status-msg");

      const aiFab = document.getElementById("kt-ai-fab");
      const aiPanel = document.getElementById("kt-ai-panel");
      const aiClose = document.getElementById("kt-ai-close");

      let activeMenu = 0;
      let activeSubIndex = 0;

      function setActiveMenu(menuIndex) {
        activeMenu = menuIndex;

        mainButtons.forEach((btn) => {
          btn.classList.toggle(
            "active",
            Number(btn.getAttribute("data-menu")) === menuIndex
          );
        });

        const activeMain = document.querySelector(
          '.kt-menu-main[data-menu="' + menuIndex + '"] span:nth-child(2)'
        );
        if (activeMain) {
          breadcrumbMain.textContent = menuIndex + " · " + activeMain.textContent.trim();
        }

        const firstSub = document.querySelector(
          '.kt-submenu-item[data-menu="' + menuIndex + '"][data-sub-index="0"]'
        );
        if (firstSub) {
          setActiveSub(menuIndex, 0, false);
        } else {
          breadcrumbSub.textContent = "";
        }

        statusMsg.textContent = "ACTIVE MENU: " + menuIndex;
      }

      function setActiveSub(menuIndex, subIndex, fromKey = true) {
        activeMenu = menuIndex;
        activeSubIndex = subIndex;

        mainButtons.forEach((btn) => {
          btn.classList.toggle(
            "active",
            Number(btn.getAttribute("data-menu")) === menuIndex
          );
        });

        subItems.forEach((item) => {
          const m = Number(item.getAttribute("data-menu"));
          const s = Number(item.getAttribute("data-sub-index"));
          item.classList.toggle("active", m === menuIndex && s === subIndex);
        });

        const sub = document.querySelector(
          '.kt-submenu-item[data-menu="' +
            menuIndex +
            '"][data-sub-index="' +
            subIndex +
            '"] span:first-child'
        );
        if (sub) {
          breadcrumbSub.textContent = sub.textContent.trim();
          statusMsg.textContent =
            "ACTIVE: " + menuIndex + " · " + breadcrumbSub.textContent;
        } else if (fromKey) {
          statusMsg.textContent = "NO SUB MENU FOR CTRL + " + subIndex;
        }
      }

      // Click handlers main
      mainButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const menuIndex = Number(btn.getAttribute("data-menu"));
          setActiveMenu(menuIndex);
        });
      });

      // Click handlers sub
      subItems.forEach((item) => {
        item.addEventListener("click", () => {
          const menuIndex = Number(item.getAttribute("data-menu"));
          const subIndex = Number(item.getAttribute("data-sub-index"));
          setActiveSub(menuIndex, subIndex);
        });
      });

      // Keyboard handlers
      window.addEventListener("keydown", (e) => {
        const key = e.key;

        // ESCAPE = Alt + 0 (back to Markets)
        if (key === "Escape") {
          e.preventDefault();
          setActiveMenu(0);
          setActiveSub(0, 0);
          statusMsg.textContent = "ESC: RETURNED TO MARKETS (0)";
          return;
        }

        // Ctrl + F reserved for Search (just status text for now)
        if (e.ctrlKey && !e.altKey && key.toLowerCase() === "f") {
          statusMsg.textContent = "SEARCH FUNCTION (Ctrl + F) TRIGGERED";
          return;
        }

        // Alt + digit → Main Menu
        if (e.altKey && !e.ctrlKey && /^[0-9]$/.test(key)) {
          e.preventDefault();
          const menuIndex = Number(key);
          setActiveMenu(menuIndex);
          return;
        }

        // Ctrl + digit → Sub Menu of active menu
        if (e.ctrlKey && !e.altKey && /^[0-9]$/.test(key)) {
          e.preventDefault();
          const subIndex = Number(key);
          setActiveSub(activeMenu, subIndex);
          return;
        }
      });

      // AI FAB behavior
      function toggleAiPanel(forceState) {
        const isOpen = aiPanel.style.display === "flex";
        const nextState =
          typeof forceState === "boolean" ? forceState : !isOpen;
        aiPanel.style.display = nextState ? "flex" : "none";
      }

      aiFab.addEventListener("click", () => {
        toggleAiPanel();
      });

      aiClose.addEventListener("click", () => {
        toggleAiPanel(false);
      });

      // Initial state
      setActiveMenu(0);
      setActiveSub(0, 0);
    })();
  </script>
</body>
  </html>

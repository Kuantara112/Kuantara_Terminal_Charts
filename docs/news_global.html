<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kuantara – Global News (Optimized & Tagged)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&amp;display=swap">

  <style>
    :root {
      /* Kuantara Terminal Palette */
      --bg-root:#000000;
      --bg-main:#111111;
      --border-soft:#2b2b2b;
      --text-main:#f5f5f5;
      --text-muted:#9b9b9b;
      --accent:#ffbf00;

      /* Font sizes */
      --fs-title:14px;
      --fs-subtitle:12px;
      --fs-body:10.5px;
      --fs-small:9.5px;
    }

    * { box-sizing:border-box; margin:0; padding:0; font-family:"Fira Code",monospace !important; }

    /* Scrollbar */
    * { scrollbar-width:thin; scrollbar-color:#2b2b2b #000000; }
    *::-webkit-scrollbar { width:6px; height:6px; }
    *::-webkit-scrollbar-track { background:#000000; }
    *::-webkit-scrollbar-thumb { background:#2b2b2b; border-radius:999px; }

    html, body { width:100%; height:100%; background-color:var(--bg-root); color:var(--text-main); }
    body { display:flex; flex-direction:column; justify-content:flex-start; align-items:stretch; }

    .page { width:100%; max-width:1200px; margin:0 auto; padding:16px; display:flex; flex-direction:column; gap:12px; min-height:100%; }

    .card { background-color:var(--bg-main); border:1px solid var(--border-soft); border-radius:4px; padding:12px 14px; display:flex; flex-direction:column; gap:8px; min-height:0; }
    .card-header-row { display:flex; justify-content:space-between; align-items:flex-start; gap:8px; }

    .badge { display:inline-flex; align-items:center; padding:2px 6px; border-radius:999px; border:1px solid var(--border-soft); font-size:var(--fs-small); color:var(--accent); background:rgba(255,191,0,0.06); }
    .dot-live { width:6px; height:6px; border-radius:999px; background:var(--accent); margin-right:6px; box-shadow:0 0 8px rgba(255,191,0,0.8); }

    .core-title { font-size:var(--fs-subtitle); font-weight:500; }
    .core-headline { font-size:var(--fs-title); font-weight:600; line-height:1.3; }

    .core-card { position:relative; overflow:hidden; cursor:default; transition:border-color 0.12s ease, background-color 0.12s ease; }
    .core-card.clickable { cursor:pointer; }
    .core-card.clickable:hover { border-color:var(--accent); background:#141414; }

    .core-body { display:flex; flex-direction:column; gap:10px; align-items:stretch; margin-top:6px; }
    
    .core-thumb { width:100%; height:160px; border-radius:4px; overflow:hidden; background:#0a0a0a; border:1px solid var(--border-soft); flex:0 0 auto; display:flex; align-items:center; justify-content:center; }
    .core-thumb img { width:100%; height:100%; object-fit:cover; display:block; }

    .core-body-content { display:flex; flex-direction:column; gap:6px; min-width:0; flex:1; }

    /* Shimmer */
    .shimmer { position:relative; overflow:hidden; background:#0d0d0d; border-radius:2px; }
    .shimmer::after { content:""; position:absolute; top:0; left:-150%; width:50%; height:100%; background:linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent); animation:shimmer 1.2s infinite; }
    @keyframes shimmer { 0% { left:-150%; } 50% { left:150%; } 100% { left:150%; } }

    .core-meta { font-size:var(--fs-small); color:var(--text-muted); display:flex; flex-wrap:wrap; gap:8px; }
    .core-summary { font-size:var(--fs-body); color:var(--text-main); line-height:1.45; }

    .pill-row { display:flex; flex-wrap:wrap; gap:6px; margin-top:2px; }
    .pill { font-size:var(--fs-small); color:var(--text-muted); padding:2px 6px; border-radius:999px; border:1px dashed var(--border-soft); opacity:0.85; }
    .pill-bull { border-color:#22c55e; color:#22c55e; }
    .pill-bear { border-color:#ef4444; color:#ef4444; }
    .pill-neutral { border-color:var(--text-muted); color:var(--text-muted); }

    .panel-title { font-size:var(--fs-subtitle); font-weight:500; }
    .filter-panel { flex-direction:column; gap:8px; }
    .filter-header { display:flex; justify-content:space-between; align-items:flex-start; gap:8px; }
    .active-filter-label { font-size:var(--fs-small); color:var(--text-muted); text-align:right; }
    .active-filter-label span { color:var(--accent); }

    .filter-grid { display:flex; flex-wrap:nowrap; gap:6px; overflow-x:auto; padding-top:2px; padding-bottom:4px; }
    .filter-btn { font-size:var(--fs-small); padding:5px 9px; border-radius:999px; border:1px solid var(--border-soft); background:#111111; color:var(--text-muted); cursor:pointer; white-space:nowrap; flex:0 0 auto; transition:all 0.12s ease; }
    .filter-btn:hover { border-color:var(--accent); color:var(--text-main); transform:translateY(-0.5px); }
    .filter-btn.is-active { background:rgba(255,191,0,0.14); border-color:var(--accent); color:var(--text-main); }

    .news-list { display:flex; flex-direction:column; gap:8px; max-height:260px; overflow-y:auto; padding-right:4px; margin-top:4px; }
    .news-item { padding:8px 8px; border-radius:4px; border:1px solid rgba(43,43,43,0.9); background:#101010; display:flex; flex-direction:column; gap:6px; cursor:default; transition:all 0.12s ease; }
    .news-item.clickable { cursor:pointer; }
    .news-item.clickable:hover { border-color:var(--accent); background:#141414; }

    .news-item-header { display:flex; justify-content:space-between; align-items:center; gap:8px; }
    .news-ticker { font-size:var(--fs-small); color:var(--accent); }
    .news-time { font-size:var(--fs-small); color:var(--text-muted); }
    .news-headline { font-size:var(--fs-body); font-weight:500; }

    .news-body { display:flex; gap:8px; align-items:flex-start; }
    .news-thumb { width:72px; height:56px; border-radius:4px; overflow:hidden; background:#0a0a0a; border:1px solid var(--border-soft); flex:0 0 auto; display:flex; align-items:center; justify-content:center; }
    .news-thumb img { width:100%; height:100%; object-fit:cover; display:block; }

    .news-body-content { display:flex; flex-direction:column; gap:4px; min-width:0; flex:1; }
    .news-tags { display:flex; flex-wrap:wrap; gap:4px; margin-top:2px; }
    
    .news-tag { font-size:var(--fs-small); padding:2px 5px; border-radius:999px; border:1px solid var(--border-soft); color:var(--text-muted); }
    .news-tag-bull { border-color:#22c55e; color:#22c55e; }
    .news-tag-bear { border-color:#ef4444; color:#ef4444; }
    .news-tag-neutral { border-color:var(--text-muted); color:var(--text-muted); }

    .news-footer { font-size:var(--fs-small); color:var(--text-muted); display:flex; justify-content:space-between; align-items:center; gap:8px; margin-top:2px; }
    
    .sentiment-chip { font-size:var(--fs-small); padding:2px 6px; border-radius:999px; border:1px solid var(--border-soft); color:var(--text-main); }
    .sentiment-bull { border-color:#22c55e; color:#22c55e; }
    .sentiment-bear { border-color:#ef4444; color:#ef4444; }
    .sentiment-neutral { border-color:var(--text-muted); color:var(--text-muted); }
    
    .hint { font-size:var(--fs-small); color:var(--text-muted); text-align:center; }

    .layout-top { display:flex; flex-direction:column; gap:12px; }
    @media (min-width:768px) { .page { padding:16px; gap:14px; } .news-list { max-height:280px; } }
    @media (min-width:1024px) { .layout-top { display:grid; grid-template-columns:minmax(0,2fr) minmax(0,2.2fr); gap:16px; align-items:stretch; } .layout-top > .card { height:100%; } .news-list { max-height:320px; } }
  </style>
</head>
<body>
  <div class="page">
    <div class="layout-top">
      <section class="card core-card" id="coreNewsHeader">
        <div class="card-header-row">
          <div><div class="badge"><span class="dot-live"></span>CORE NEWS</div></div>
          <div class="core-meta">
            <span id="coreUpdated">Updated: --:--</span>
            <span id="coreSource">Source: –</span>
          </div>
        </div>
        <div class="core-body">
          <div class="core-thumb" id="coreThumb"></div>
          <div class="core-body-content">
            <div class="core-title">Global Macro Focus</div>
            <div class="core-headline" id="coreHeadline">Loading Intelligence...</div>
            <p class="core-summary" id="coreSummary"></p>
            <div class="pill-row" id="coreTags"></div>
          </div>
        </div>
      </section>

      <section class="card filter-panel">
        <div class="filter-header">
          <div><div class="panel-title">News Universe &amp; Stream</div></div>
          <div class="active-filter-label">Active filter:<br><span id="activeFilterLabel">All Assets</span></div>
        </div>
        <div class="filter-grid" id="filterGrid">
          <button class="filter-btn is-active" data-filter="all-assets">All Assets</button>
          <button class="filter-btn" data-filter="stocks">Stocks</button>
          <button class="filter-btn" data-filter="commodities">Commodities</button>
          <button class="filter-btn" data-filter="fx">Forex &amp; Currencies</button>
          <button class="filter-btn" data-filter="indices">Indices</button>
          <button class="filter-btn" data-filter="crypto">Cryptocurrencies</button>
          <button class="filter-btn" data-filter="macro-topics">Macro Topics</button>
          <button class="filter-btn" data-filter="etfs">ETFs</button>
          <button class="filter-btn" data-filter="private-companies">Private Cos</button>
          <button class="filter-btn" data-filter="organisations">Organisations</button>
          <button class="filter-btn" data-filter="people">People</button>
          <button class="filter-btn" data-filter="events">Events</button>
          <button class="filter-btn" data-filter="property">Property</button>
          <button class="filter-btn" data-filter="financial-topics">Finance Topics</button>
          <button class="filter-btn" data-filter="products">Products</button>
          <button class="filter-btn" data-filter="sovereign-bonds">Gov Bonds</button>
        </div>
        <div class="news-list" id="newsList"></div>
      </section>
    </div>
  </div>

  <script>
    (function() {
      // Always clear cached news on each full page load,
      // so setiap user refresh page -> data baru di-fetch
      try {
        for (let i = 0; i < sessionStorage.length; i++) {
          const key = sessionStorage.key(i);
          if (key && key.startsWith("kn_")) {
            sessionStorage.removeItem(key);
          }
        }
      } catch (e) {}

      // CONFIG
      const CONFIG = {
        ASSET_CLASS_MACRO: "163",
        CACHE_DURATION: 3 * 60 * 1000,
        AUTO_REFRESH_INTERVAL: 60000,
        DEBOUNCE_DELAY: 300,
        CITYFALCON_LIMIT: 40
      };

      const USER_PROXY = new URLSearchParams(location.search).get("cf_proxy");
      const PROXY_CHAIN = [USER_PROXY, "https://cors-anywhere-proxy-six.vercel.app/", ""].filter(Boolean);

      const ASSET_CLASSES = [
        { id: "all", label: "All Assets" },
        { id: "1", label: "Stocks" },
        { id: "61", label: "Commodities" },
        { id: "73", label: "Forex & Currencies" },
        { id: "72", label: "Indices" },
        { id: "163", label: "Macro Topics" },
        { id: "152", label: "Cryptocurrencies" },
        { id: "26", label: "ETFs" },
        { id: "68", label: "Private Companies" },
        { id: "156", label: "Organisations" },
        { id: "158", label: "People" },
        { id: "157", label: "Events" },
        { id: "151", label: "Property" },
        { id: "153", label: "Financial Topics" },
        { id: "169", label: "Products" },
        { id: "65", label: "Sovereign Bonds" }
      ];

      const CITYFALCON_BASE = "https://www.cityfalcon.com/webapi/v1/stories";
      
      const UI = {
        filterButtons: document.querySelectorAll(".filter-btn"),
        activeLabel: document.getElementById("activeFilterLabel"),
        newsList: document.getElementById("newsList"),
        core: {
          headline: document.getElementById("coreHeadline"),
          summary: document.getElementById("coreSummary"),
          tags: document.getElementById("coreTags"),
          updated: document.getElementById("coreUpdated"),
          source: document.getElementById("coreSource"),
          thumb: document.getElementById("coreThumb"),
          card: document.getElementById("coreNewsHeader")
        }
      };

      const FILTER_TO_ASSET_CLASS = {
        "all-assets": null,
        "stocks": "1",
        "commodities": "61",
        "fx": "73",
        "indices": "72",
        "macro-topics": "163",
        "crypto": "152",
        "etfs": "26",
        "private-companies": "68",
        "organisations": "156",
        "people": "158",
        "events": "157",
        "property": "151",
        "financial-topics": "153",
        "products": "169",
        "sovereign-bonds": "65"
      };

      let currentFilter = "all-assets";
      let refreshTimer = null;
      let debounceTimer = null;

      const cacheService = {
        get: (key) => {
          try {
            const item = JSON.parse(sessionStorage.getItem(`kn_${key}`));
            if (!item) return null;
            if (Date.now() - item.timestamp > CONFIG.CACHE_DURATION) {
              sessionStorage.removeItem(`kn_${key}`);
              return null;
            }
            return item.data;
          } catch (e) {
            return null;
          }
        },
        set: (key, data) => {
          try {
            sessionStorage.setItem(`kn_${key}`, JSON.stringify({ timestamp: Date.now(), data: data }));
          } catch (e) {}
        }
      };
      
      const renderShimmer = (target) => {
        if (target === 'core') {
          UI.core.headline.innerHTML = '<div class="shimmer" style="width:90%; height:20px;"></div>';
          UI.core.summary.innerHTML =
            '<div class="shimmer" style="width:100%; height:12px; margin-bottom:8px;"></div>' +
            '<div class="shimmer" style="width:70%; height:12px;"></div>';
        } else if (target === 'list') {
          UI.newsList.innerHTML = "";
          const frag = document.createDocumentFragment();
          for (let i = 0; i < 5; i++) {
            const div = document.createElement('div');
            div.className = "news-item";
            div.innerHTML = `
              <div class="news-body">
                <div class="news-thumb shimmer"></div>
                <div class="news-body-content">
                  <div class="shimmer" style="width:80%; height:12px; margin-bottom:6px;"></div>
                  <div class="shimmer" style="width:40%; height:10px;"></div>
                </div>
              </div>`;
            frag.appendChild(div);
          }
          UI.newsList.appendChild(frag);
        }
      };

      // Helper untuk warna chip/tag berdasarkan berbagai skala skor
      const getTagClass = (score) => {
        if (score == null) return "news-tag-neutral";

        // Jika numeric
        if (typeof score === "number") {
          const abs = Math.abs(score);
          // Skala -1 s/d 1 (umum untuk sentiment)
          if (abs <= 1) {
            if (score > 0.15) return "news-tag-bull";
            if (score < -0.15) return "news-tag-bear";
            return "news-tag-neutral";
          }
          // Skala 0–100
          if (score >= 60) return "news-tag-bull";
          if (score <= 40) return "news-tag-bear";
          return "news-tag-neutral";
        }

        // String sentiment
        const val = String(score).toLowerCase();
        if (val.includes("pos") || val.includes("bull")) return "news-tag-bull";
        if (val.includes("neg") || val.includes("bear")) return "news-tag-bear";
        return "news-tag-neutral";
      };

      // Ambil skor sentiment utama untuk chip kanan atas (Positive / Negative / Neutral)
      const extractSentimentScore = (story) => {
        // Berbagai kemungkinan field dari CityFalcon / API lainnya
        if (typeof story.sentiment_score === "number") return story.sentiment_score;
        if (typeof story.sentiment === "number") return story.sentiment;
        if (story.sentiment && typeof story.sentiment.value === "number") return story.sentiment.value;

        // Rata-rata sentiment dari analytics jika ada
        if (Array.isArray(story.analytics) && story.analytics.length) {
          const vals = story.analytics
            .map(a => (typeof a.sentiment_score === "number"
              ? a.sentiment_score
              : (typeof a.sentiment === "number" ? a.sentiment : null)))
            .filter(v => v != null);
          if (vals.length) {
            return vals.reduce((a, b) => a + b, 0) / vals.length;
          }
        }

        // String-based sentiment
        if (typeof story.sentiment === "string") {
          const v = story.sentiment.toLowerCase();
          if (v.includes("pos")) return 0.7;
          if (v.includes("neg")) return -0.7;
          if (v.includes("neu")) return 0;
        }

        return null;
      };

      const normalizeStory = (story) => {
        const pickImage = (s) => (s.imageUrls?.[0] || s.image_url || s.lead_image_url || "");
        
        // Sentiment chip (pojok kanan bawah)
        let sentimentClass = "sentiment-neutral";
        let sentimentLabel = "Neutral";
        const sScore = extractSentimentScore(story);

        if (sScore != null && typeof sScore === "number") {
          const abs = Math.abs(sScore);
          // Jika -1..1
          if (abs <= 1) {
            if (sScore > 0.15) {
              sentimentClass = "sentiment-bull";
              sentimentLabel = "Positive";
            } else if (sScore < -0.15) {
              sentimentClass = "sentiment-bear";
              sentimentLabel = "Negative";
            }
          } else {
            // Skala 0–100 atau -100..100
            if (sScore >= 60 || sScore >= 20) {
              sentimentClass = "sentiment-bull";
              sentimentLabel = "Positive";
            } else if (sScore <= 40 || sScore <= -20) {
              sentimentClass = "sentiment-bear";
              sentimentLabel = "Negative";
            }
          }
        }

        // 1. Asset Classes (biasanya Neutral)
        const assetTags = (story.asset_class_names || []).map(t => ({
          label: t,
          cls: "news-tag-neutral"
        }));

        // 2. Analytics/Entities (dengan warna sentiment masing-masing)
        const analyticsTags = (story.analytics || []).map(a => ({
          label: a.entity_name || a.name || "Entity",
          cls: getTagClass(a.sentiment_score ?? a.sentiment)
        }));

        let allTags = [...assetTags, ...analyticsTags];
        if (allTags.length === 0) {
          allTags.push({ label: story.category || "General", cls: "news-tag-neutral" });
        }

        return {
          headline: story.title || story.headline || "Untitled",
          ticker: story.tickers?.[0] || story.symbols?.[0] || "",
          time: story.publishTime
            ? new Date(story.publishTime).toISOString().slice(11, 16) + " UTC"
            : "",
          source: story.source_name || story.domain_name || "Unknown",
          summary: story.description || story.summary || "",
          url: story.url || story.link || "",
          image: pickImage(story),
          sentiment: sentimentLabel,
          sentimentClass: `sentiment-chip ${sentimentClass}`,
          tags: allTags
        };
      };

      const buildUrl = (assetId) => {
        const params = new URLSearchParams({
          categories: "mp,op,r",
          languages: "en",
          limit: String(CONFIG.CITYFALCON_LIMIT),
          min_score: "5",
          order_by: "latest",
          time_filter: "month1",
          with_sentiments: "true"
        });
        if (assetId) params.append("asset_classes", assetId);
        return `${CITYFALCON_BASE}?${params.toString()}`;
      };

      const fetchStories = async (assetId) => {
        const cacheKey = assetId || 'all';
        const cached = cacheService.get(cacheKey);
        if (cached) return { stories: cached, error: null };

        const url = buildUrl(assetId);
        for (const proxy of PROXY_CHAIN) {
          try {
            const target = proxy
              ? (proxy.endsWith("/")
                  ? proxy + url.replace(/^https?:\/\//, "")
                  : proxy + "/" + url.replace(/^https?:\/\//, ""))
              : url;
            const res = await fetch(target);
            if (!res.ok) continue;
            const data = await res.json();
            const stories = Array.isArray(data.stories) ? data.stories : [];
            if (stories.length > 0) cacheService.set(cacheKey, stories);
            return { stories, error: null };
          } catch (err) {
            continue;
          }
        }
        return { stories: [], error: "Fail" };
      };

      const updateCoreNews = (stories) => {
        const topStoryRaw =
          stories.find(s => (s.score > 50 && (s.imageUrls?.length || s.image_url))) ||
          stories[0];
        if (!topStoryRaw) return;
        const story = normalizeStory(topStoryRaw);

        UI.core.headline.textContent = story.headline;
        UI.core.summary.textContent = story.summary
          ? story.summary.substring(0, 180) + (story.summary.length > 180 ? "..." : "")
          : "";
        UI.core.source.textContent = `Source: ${story.source}`;
        UI.core.updated.textContent = story.time ? `Updated: ${story.time}` : "Updated: –";
        
        UI.core.tags.innerHTML = "";
        const tagFrag = document.createDocumentFragment();
        story.tags.slice(0, 8).forEach(t => {
          const span = document.createElement("span");
          let pillClass = "pill-neutral";
          if (t.cls.includes("bull")) pillClass = "pill-bull";
          if (t.cls.includes("bear")) pillClass = "pill-bear";
          span.className = `pill ${pillClass}`;
          span.textContent = t.label;
          tagFrag.appendChild(span);
        });
        UI.core.tags.appendChild(tagFrag);

        UI.core.thumb.innerHTML = "";
        if (story.image) {
          const img = document.createElement("img");
          img.src = story.image;
          img.loading = "eager";
          UI.core.thumb.appendChild(img);
        }
        UI.core.card.classList.add("clickable");
        UI.core.card.onclick = () => {
          if (story.url) window.open(story.url, "_blank");
        };
      };

      const updateNewsStream = (stories) => {
        UI.newsList.innerHTML = "";
        const fragment = document.createDocumentFragment();

        stories.forEach(raw => {
          const item = normalizeStory(raw);
          const article = document.createElement("article");
          article.className = "news-item clickable";
          if (item.url) {
            article.onclick = () => window.open(item.url, "_blank");
          }

          const imgHTML = item.image
            ? `<div class="news-thumb"><img src="${item.image}" alt="img" loading="lazy" decoding="async"></div>`
            : '';
          
          const tagsHTML = item.tags.slice(0, 4).map(t =>
            `<span class="news-tag ${t.cls}">${t.label}</span>`
          ).join("");

          article.innerHTML = `
            <div class="news-item-header">
              ${item.ticker ? `<div class="news-ticker">${item.ticker}</div>` : ''}
              <div class="news-time">${item.time}</div>
            </div>
            <div class="news-body">
              ${imgHTML}
              <div class="news-body-content">
                <div class="news-headline">${item.headline}</div>
                <div class="news-tags">${tagsHTML}</div>
              </div>
            </div>
            <div class="news-footer">
              <span class="news-source">Source: ${item.source}</span>
              <div class="news-sentiment">
                <span class="${item.sentimentClass}">${item.sentiment}</span>
              </div>
            </div>
          `;
          fragment.appendChild(article);
        });
        UI.newsList.appendChild(fragment);
      };

      const loadContent = async (filterKey) => {
        const assetId = FILTER_TO_ASSET_CLASS[filterKey] ?? FILTER_TO_ASSET_CLASS[currentFilter] ?? null;
        let label = "All Assets";
        if (assetId) {
          const found = ASSET_CLASSES.find(a => a.id === assetId);
          if (found) label = found.label;
        }
        UI.activeLabel.textContent = label;

        const cacheKey = assetId || 'all';
        const isCached = cacheService.get(cacheKey);
        if (!isCached) renderShimmer('list');
        
        const { stories } = await fetchStories(assetId);
        
        if (stories && stories.length) {
          updateNewsStream(stories);
          if (filterKey === 'all-assets' || filterKey === 'macro-topics') {
            updateCoreNews(stories);
          }
        } else {
          UI.newsList.innerHTML = `<div class="hint" style="padding:20px;">No stories found.</div>`;
        }
      };

      const handleFilterClick = (btn) => {
        const filterKey = btn.dataset.filter;
        if (filterKey === currentFilter) return;
        UI.filterButtons.forEach(b => b.classList.toggle("is-active", b === btn));
        currentFilter = filterKey;
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => { loadContent(filterKey); }, CONFIG.DEBOUNCE_DELAY);
      };

      UI.filterButtons.forEach(btn =>
        btn.addEventListener("click", () => handleFilterClick(btn))
      );

      renderShimmer('core');
      loadContent("all-assets");
      
      // Auto-refresh dengan invalidasi cache per filter yang sedang aktif
      refreshTimer = setInterval(() => {
        const assetId = FILTER_TO_ASSET_CLASS[currentFilter];
        const cacheKey = assetId || 'all';
        try {
          sessionStorage.removeItem(`kn_${cacheKey}`);
        } catch (e) {}
        loadContent(currentFilter);
      }, CONFIG.AUTO_REFRESH_INTERVAL);
    })();
  </script>
</body>
</html>
